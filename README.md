# Docker-сетап для WireGuard

Этот репозиторий предоставляет Docker-контейнеры для безопасной настройки VPN с использованием WireGuard. Включает сервер WireGuard (`wg-easy`), клиентскую контейнеру (`peer`), шлюзовый контейнер (`gateway`) и обратный прокси с NGINX для удобного доступа к веб-интерфейсу WireGuard.

## Обзор сервисов

### `wg-easy` (Сервер WireGuard)
- Работает как сервер WireGuard с веб-управлением через интерфейс `wg-easy`.
- Настроен для форвардинга трафика и маскарадирования IP-адресов.
- Открывает порты `51820/udp` и `51821/tcp`.

### `peer` (Клиент WireGuard)
- Контейнер, создаваемый из исходного Dockerfile, действует как клиент WireGuard.
- Настроен для подключения к серверу `wg-easy` с использованием предварительно разделённых ключей.
- Включает необходимые возможности для работы с WireGuard.

### `gateway` (Шлюз сети)
- Использует образ `nicolaka/netshoot` для выступления в роли сетевого шлюза между сетями `net_A`, `net_B` и `net_C`.
- Настроены правила iptables для маршрутизации и фильтрации трафика между сетями.
- Захватывает сетевой трафик и сохраняет его в файл `/data/gateway.pcap`.

### `nginx` (Обратный прокси)
- Использует NGINX как обратный прокси для доступа к веб-интерфейсу WireGuard (`wg-easy`).
- Слушает на порту `80` и перенаправляет запросы на сервис `wg-easy`.

## Сетевые настройки
Контейнеры взаимодействуют через кастомные Docker-сети:
- `net_A`: Сеть шлюза
- `net_B`: Сеть сервера WireGuard
- `net_C`: Сеть обратного прокси и сервера WireGuard

## Запуск

1. Убедитесь, что у вас установлен Docker и Docker Compose.
2. Клонируйте репозиторий на ваш сервер.
3. Настройте конфигурационные файлы `config/wg0.conf`, `client_1_config/wg0.conf`, и `nginx.conf` под ваши требования.
4. Запустите сервисы с помощью команды:

```bash
docker-compose up -d
